{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\gillescas\\\\Documents\\\\Second Year\\\\Summer Quarter\\\\Capstone\\\\KiKoi-Capstone\\\\react-front-end\\\\src\\\\components\\\\Admin.js\",\n  _s = $RefreshSig$();\nimport { React, useEffect, useState } from 'react';\nimport axios from \"axios\";\nimport Cookies from \"universal-cookie\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst cookies = new Cookies();\nconst token = cookies.get(\"TOKEN\");\nconst logout = () => {\n  cookies.remove(\"TOKEN\", {\n    path: \"/\"\n  });\n  window.location.href = \"/\";\n};\nexport default function Admin() {\n  _s();\n  const [message, setMessage] = useState(\"\");\n  const [productData, setProductData] = useState([]);\n  useEffect(() => {\n    const config = {\n      method: \"get\",\n      url: \"http://localhost:5000/admin-endpoint\",\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    };\n    axios(config).then(result => {\n      setMessage(result.data.message);\n    }).catch(e => {\n      e = new Error();\n    });\n  }, []);\n  useEffect(() => {\n    const config = {\n      method: \"get\",\n      url: \"http://localhost:5000/admin-products\",\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    };\n    axios(config).then(result => {\n      setProductData(result.data.data);\n    }).catch(e => {\n      e = new Error();\n    });\n  }, []);\n  function go(id) {\n    console.log(\"Deleting product: \", id);\n    if (id && id !== \"\") {\n      fetch(`http://localhost:5000/delete/${id}`, {\n        method: \"DELETE\"\n      }).then(response => response.json()).then(() => {\n        fetch(`http://localhost:5000/products`).then(response => response.json()).then(data => {\n          setProductData(data);\n        }).catch(error => {\n          console.error(\"Error regrabing data\", error);\n        });\n      }).catch(error => {\n        console.error(error);\n      });\n    }\n  }\n  if (productData && message) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container text-center\",\n        id: \"prodcontain\",\n        children: productData === null || productData === void 0 ? void 0 : productData.map(data => /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            id: \"proddisplay\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card text-center\",\n              style: {\n                width: \"18rem\"\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: data.img,\n                className: \"card-img-top \",\n                alt: \"productImg\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 81,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"card-body\",\n                children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                  className: \"card-title\",\n                  children: data.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 83,\n                  columnNumber: 33\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"card-text\",\n                  children: [\"$\", data.price]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 84,\n                  columnNumber: 33\n                }, this), /*#__PURE__*/_jsxDEV(\"ol\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"ul\", {\n                    children: data.details[0]\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 86,\n                    columnNumber: 37\n                  }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n                    children: data.details[1]\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 89,\n                    columnNumber: 37\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 85,\n                  columnNumber: 33\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn btn-danger\",\n                  id: \"buttons\",\n                  variant: \"danger\",\n                  onClick: () => {\n                    go(data._id);\n                  },\n                  children: \"Delete\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 93,\n                  columnNumber: 33\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 82,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 80,\n              columnNumber: 25\n            }, this)\n          }, data._id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 21\n          }, this)\n        }, void 0, false))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 9\n    }, this);\n  } else {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"Admin\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 13\n      }, this)\n    }, void 0, false);\n  }\n}\n_s(Admin, \"vRErqs+3xnFd2/8kX/QJuUT3Q3A=\");\n_c = Admin;\nvar _c;\n$RefreshReg$(_c, \"Admin\");","map":{"version":3,"names":["React","useEffect","useState","axios","Cookies","jsxDEV","_jsxDEV","Fragment","_Fragment","cookies","token","get","logout","remove","path","window","location","href","Admin","_s","message","setMessage","productData","setProductData","config","method","url","headers","Authorization","then","result","data","catch","e","Error","go","id","console","log","fetch","response","json","error","children","className","map","style","width","src","img","alt","fileName","_jsxFileName","lineNumber","columnNumber","name","price","details","variant","onClick","_id","_c","$RefreshReg$"],"sources":["C:/Users/gillescas/Documents/Second Year/Summer Quarter/Capstone/KiKoi-Capstone/react-front-end/src/components/Admin.js"],"sourcesContent":["import {React, useEffect, useState} from 'react';\r\nimport axios from \"axios\";\r\nimport Cookies from \"universal-cookie\";\r\n\r\nconst cookies = new Cookies();\r\nconst token = cookies.get(\"TOKEN\");\r\n\r\nconst logout = () => {\r\n    cookies.remove(\"TOKEN\", {path: \"/\"});\r\n    window.location.href = \"/\";\r\n}\r\n\r\nexport default function Admin() {\r\n    const [message, setMessage] = useState(\"\");\r\n    const [productData, setProductData] = useState([]);\r\n\r\n    useEffect(() => {\r\n        const config = {\r\n            method: \"get\",\r\n            url: \"http://localhost:5000/admin-endpoint\",\r\n            headers: {\r\n                Authorization: `Bearer ${token}`,\r\n            },\r\n        };\r\n        axios(config)\r\n        .then((result) => {\r\n            setMessage(result.data.message);\r\n        })\r\n        .catch((e) => {\r\n            e = new Error();\r\n        });\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        const config = {\r\n            method: \"get\",\r\n            url: \"http://localhost:5000/admin-products\",\r\n            headers: {\r\n                Authorization: `Bearer ${token}`,\r\n            },\r\n        };\r\n        axios(config)\r\n        .then((result) => {\r\n            setProductData(result.data.data);\r\n        })\r\n        .catch((e) => {\r\n            e = new Error();\r\n        });\r\n    }, []);\r\n\r\n    function go(id){\r\n        console.log(\"Deleting product: \", id);\r\n        if(id && id !== \"\"){\r\n            fetch(`http://localhost:5000/delete/${id}`, {\r\n                method: \"DELETE\"\r\n            })\r\n            .then(response => response.json())\r\n            .then(() => {\r\n                fetch(`http://localhost:5000/products`)\r\n                .then(response => response.json())\r\n                .then(data => {\r\n                    setProductData(data);\r\n                })\r\n                .catch(error => {\r\n                    console.error(\"Error regrabing data\", error)\r\n                });\r\n            })\r\n            .catch(error => {\r\n                console.error(error);\r\n            });\r\n        }\r\n    }\r\n    \r\n    if(productData && message) {return (\r\n        <div>\r\n            <div className=\"container text-center\" id=\"prodcontain\">\r\n                {productData?.map(data => (\r\n                    <>\r\n                    <div key={data._id} id=\"proddisplay\">\r\n                        <div className=\"card text-center\" style={{width: \"18rem\"}}>\r\n                            <img src={data.img} className=\"card-img-top \" alt=\"productImg\"/>\r\n                            <div className=\"card-body\">\r\n                                <h4 className=\"card-title\">{data.name}</h4>\r\n                                <p className=\"card-text\">${data.price}</p>\r\n                                <ol>\r\n                                    <ul>\r\n                                    {data.details[0]}\r\n                                    </ul>\r\n                                    <ul>\r\n                                    {data.details[1]}\r\n                                    </ul>\r\n                                </ol>\r\n                                <button className=\"btn btn-danger\" id=\"buttons\" variant=\"danger\" onClick={() => {go(data._id)}}>Delete</button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    </>\r\n                ))}\r\n            </div>\r\n        </div>\r\n        )\r\n    }\r\n    else {\r\n        return (\r\n            <>\r\n            <div>Admin</div>\r\n            </>\r\n        )\r\n    }\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}